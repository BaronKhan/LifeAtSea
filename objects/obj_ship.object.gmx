<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_ship_edit</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_physics</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initialise general variables
can_move = true;
started = true;
getting_pw = false;
new_speed = 0
friction = 0.4
new_image_angle = 0
eye_image = 0
image_speed = 0
eye_inc = random(0.05)
locked = false
ne = 0

direction = 270
image_angle = 270

camera = instance_create(x,y,obj_camera)
view_object[0] = obj_camera


x_cursor = x+lengthdir_x(200,image_angle)
y_cursor = y+lengthdir_y(200,image_angle)

cursor = instance_create(x_cursor,y_cursor,obj_cursor);
var id_ = id;
with (cursor) {
  my_ship = id_;
}

hit_explode = false;

bullet_timer = 2;

//combos
combo_count = 0;

//powerups
gravity_pull = 0.08;
max_oxygen = 200*global.pw_oxygeninc;
super_raiyan_active = false;
super_raiyan_available = false;
max_speed = 20;
bullet_timer_max = 30/global.pw_bullet_speed;

//life
dead = false; // not actually dead, just float to surface and wiggle to shore, game over
dead_surface = false;
oxygen = max_oxygen;

hit = false;

bubble_count = 0;

player_colour = c_black;
player_white_grad = 0.0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Trail Particle system
// Code created using Aerohawk Effects 4 by Wormintheworks

// VARIABLE SETUP. Put this in the create event before the PARTICLE SETUP.

_partabc_shape=pt_shape_pixel
_partabc_count=1
_partabc_sprite=1
//sPartSprite=spr_empty
_partabc_col1=16775882
_partabc_col2=16777088
_partabc_col3=16777215
_partabc_alp1=1
_partabc_alp2=1
_partabc_alp3=1
_partabc_sizmn=0.15
_partabc_sizmx=0.20
_partabc_sizic=0
_partabc_sizwg=0
_partabc_xscale=1
_partabc_yscale=1
_partabc_orimn=0
_partabc_orimx=0
_partabc_oriic=0
_partabc_oriwg=0
_partabc_orirl=0
_partabc_dirmn=direction-180
_partabc_dirmx=direction-180
_partabc_diric=0
_partabc_dirwg=0
_partabc_spdmn=0
_partabc_spdmx=0
_partabc_spdic=0
_partabc_spdwg=0
_partabc_grvam=0
_partabc_grvdir=0
_partabc_lifemin=25
_partabc_lifemax=40
_partabc_abl=0
_emiabc_radius=2
_emiabc_shape=ps_shape_ellipse
_emiabc_distr=ps_distr_linear

// PARTICLE SETUP. Put this in the create event after the VARIABLE SETUP.

_sysabc=part_system_create()
part_system_depth(_sysabc,depth+1)
_partabc=part_type_create()
part_type_shape(_partabc,_partabc_shape)
if (_partabc_sprite=1) {part_type_sprite(_partabc,spr_bubble,0,0,0)}
part_type_color3(_partabc,_partabc_col1,_partabc_col2,_partabc_col3)
part_type_alpha3(_partabc,_partabc_alp1,_partabc_alp2,_partabc_alp3)
part_type_size(_partabc,_partabc_sizmn,_partabc_sizmx,_partabc_sizic,_partabc_sizwg)
part_type_scale(_partabc,_partabc_xscale,_partabc_yscale)
part_type_orientation(_partabc,_partabc_orimn,_partabc_orimx,_partabc_oriic,_partabc_oriwg,_partabc_orirl)
part_type_direction(_partabc,_partabc_dirmn,_partabc_dirmx,_partabc_diric,_partabc_dirwg)
part_type_speed(_partabc,_partabc_spdmn,_partabc_spdmx,_partabc_spdic,_partabc_spdwg)
part_type_gravity(_partabc,_partabc_grvam,_partabc_grvdir)
part_type_life(_partabc,_partabc_lifemin,_partabc_lifemax)
part_type_blend(_partabc,_partabc_abl)
_emiabc=part_emitter_create(_sysabc)

/* PARTICLE CREATION. default is stream, uncomment to burst. Place in the event
that should start your particle creation, Aerohawk Effects 4 uses the CREATE event. */

//part_emitter_stream(_sysabc,_emiabc,_partabc,_partabc_count)

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Y-Offset
yy = 0
y_add = false
temp_y = 0

//Wiggle offset
wiggle_offset = 0;
wiggle_add = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Inherit Event
event_inherited()
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Start oxygen timer
alarm[1] = room_speed/4;

//Start expelling oxygen when low
alarm[4] = (oxygen/max_oxygen)*500;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initialise bonus points
can_get_no_hit_3 = true;
got_oxygen_bonus = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Initialise power up get variables
pw_x = x;
pw_y = y;
pw_out_of_water = false;
pw_angle = 0;
got_pw = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Delete if client
if (room == room_coop_test) {
  global.dual_controls = true;
  if (!global.haveserver) {
    instance_destroy();
    instance_destroy(obj_oxygen_bar);
    instance_destroy(camera);
    instance_destroy(cursor);
    instance_destroy(obj_ship_coop);
  }
  global.pw_bulletdmg = 1;  //increment (+ change colour when 3?)
  global.pw_bullet3 = false;
  global.pw_oxygeninst = false;
  global.pw_super_raiyan = 0; //1 or 0, increment for longer
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy Particle System
part_system_clear(_sysabc)
part_system_destroy(_sysabc)

if (super_raiyan_active) {
  part_system_clear(_systemabc)
  part_system_destroy(_systemabc)
  super_raiyan_active = false;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Flash while getting pw
instance_create(0,0, obj_fade_white);
if (alarm[6] &gt; (room_speed/2) + 1) {
  alarm[9] = room_speed;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Fade out to next room
if (instance_number(obj_star) &gt; 0) {
  alarm[8] = room_speed/3;
} else {
  global.story_score += (score - global.story_score);
  if (room != room_level_15) {
    if (global.story_level &lt; obj_story_ctrl.level_num) {
      global.story_level = obj_story_ctrl.level_num;
      save_data("Progress", "Story", global.story_level);
    }
    save_data("Progress", "StoryScore", global.story_score);
  }
  with (instance_create(0,0,obj_fade_out)) {
    room_target = room_next(room);
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy ligthning
with (obj_lightning_pw) {
  instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Get power up
can_move = true;
getting_pw = false;
instance_create(0,0, obj_fade_white);
alarm[7] = room_speed/20;
got_pw = true;

if (room == room_level_12) {
  super_raiyan_available = false;
  super_raiyan_active = true;
  event_user(1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Super raiyan timeout
super_raiyan_active = false;
part_system_clear(_systemabc)
part_system_destroy(_systemabc)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Expel oxygen when low
if ((oxygen &lt; max_oxygen * 0.2) &amp;&amp; (oxygen &gt; max_oxygen * 0.05)) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
}

//Start expelling oxygen when low
alarm[4] = (oxygen/max_oxygen)*500;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Recover from hit
hit = false;
combo_count = 0;
can_get_no_hit_3 = true;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Reset explode collision
hit_explode = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///decrease oxygen
oxygen--;
alarm[1] = room_speed/4;
oxygen = clamp(oxygen, 0, max_oxygen);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create the bullet
if (y &gt; 496 || super_raiyan_active) {
  if locked = true
  {
    with (instance_create(x,y,obj_bullet))
    {
      ne = obj_ship.ne;
    }
  }
  else
  {
    with (instance_create(x,y,obj_bullet))
    {
      ne = 0
    }
  }
  if (global.pw_bullet3) {
    with (instance_create(x+lengthdir_x(8, image_angle+90),y+lengthdir_y(8, image_angle+90),obj_bullet)) {
      ne = 0;
    }
    with (instance_create(x+lengthdir_x(8, image_angle-90),y+lengthdir_y(8, image_angle-90),obj_bullet)) {
      ne = 0;
    }
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Movement code

//for (i=0; i&lt;obj_water.nodes; i+=1)
//{
 if y &gt; 496
 //y &gt; obj_water.yy[i]
 {
  gravity = 0
  friction = 0.4
  got_oxygen_bonus = false;
  //direction = (direction+(sin(degtorad(obj_controller.dStick-direction))*12));
  
  if (!dead &amp;&amp; can_move &amp;&amp; instance_number(obj_controller) &gt; 0) {
    direction = obj_controller.dStick;
    if (super_raiyan_active) {
      new_speed = obj_controller.lStick / 9;
    }
    else {
      new_speed = obj_controller.lStick / 12;
    }
    if (got_pw &amp;&amp; alarm[8] &lt;= -1) {
      event_user(0);
    }
  }
  else if (dead || !started) {
    if (!started || (y &gt; 496 &amp;&amp; !dead_surface)) { direction = 90; }
    else if (started &amp;&amp; dead) {
      if (!dead_surface) {
        if (room != room_survival) {
          instance_create(0,0, obj_fade_out);
        }
        dead_surface = true;
      }
      direction = 165; 
    }
    new_speed = 5.33;
  } else if (getting_pw) {
    new_speed = 5.33;
    direction = point_direction(x, y, room_width/2, 380);
  }
  
  if new_speed &gt; speed
  {
   speed = new_speed
  }
  
  if (!dead &amp;&amp; can_move &amp;&amp; instance_number(obj_controller) &gt; 0) {
    if obj_controller.lStick2 != 0
    {
     image_angle = (image_angle+(sin(degtorad(obj_controller.dStick2-image_angle))*30));
    }
    else
    {
     image_angle = (image_angle+(sin(degtorad(obj_controller.dStick-image_angle))*30));
     //image_angle = direction
    }
  }
  else {
    image_angle = direction;
  }
  
  
  if (!dead) {
    x = max(0, min(x, room_width));
  }
  y = max(0, min(y, room_height));
 }
 else
 {
  if (global.pw_oxygeninst) {
    oxygen += 20;
  }
  else {
    oxygen += 1;
  }
  gravity = gravity_pull;
  hspeed += random_range(-0.01,0.01)
  friction = 0
  gravity_direction = 270
  
  //Get oxygen bonus
  if (!got_oxygen_bonus &amp;&amp; !dead &amp;&amp; can_move) {
    if (oxygen/max_oxygen &lt; 0.1) {
      add_message("Risky! +50pts");
      score += 50;
    }
    else if (oxygen/max_oxygen &lt; 0.2) {
      add_message("Close! +20pts");
      score += 20;
    }
    got_oxygen_bonus = true;
  }
  
  if (!dead &amp;&amp; can_move &amp;&amp; instance_number(obj_controller) &gt; 0) {
    if obj_controller.lStick2 != 0
    {
     image_angle = (image_angle+(sin(degtorad(obj_controller.dStick2-image_angle))*30));
    }
    else
    {
     //image_angle = (image_angle+(sin(degtorad(obj_controller.dStick-image_angle))*30));
     image_angle = direction
    }
  }
  else if (dead) {
    image_angle = direction;
    if (y &gt; 490 &amp;&amp; dead_surface) { direction = 165; }
    else
    {
      if (!dead_surface) {
        if (room != room_survival) {
          instance_create(0,0, obj_fade_out);
        }
        dead_surface = true;
        direction = 165;
      }
      
      gravity = gravity_pull;
    }
    new_speed = 5.33;
  } else if (getting_pw) {
    if (y &lt; 410 &amp;&amp; !pw_out_of_water) {
      pw_out_of_water = true;
      gravity = 0;
      hspeed = 0;
      vspeed = 0;
      pw_x = x;
      pw_y = y - 16;
      pw_angle = 270;
      instance_create(pw_x, pw_y, obj_lightning_pw);
      alarm[6] = room_speed*2.5;
      alarm[9] = room_speed;
    } else if (pw_out_of_water) {
      pw_angle = (pw_angle-8) % 360;
      x = pw_x + lengthdir_x(16, pw_angle);
      y = pw_y + lengthdir_y(16, pw_angle);
      hspeed = 0;
      vspeed = 0;
    } else {
      gravity = gravity_pull;
    }
  }
  
  if (instance_number(obj_controller)) &gt; 0 {
    obj_controller.dStick = direction
  }
 
  if (!dead) { x = max(0, min(x, room_width)); }
  y = max(0, min(y, room_height));
  if speed &gt; max_speed
  {
   speed = max_speed
  }
 }
//}
 
//Shooting timer

//Old timer
/*if obj_controller.lStick2 != 0 &amp;&amp; !dead
{
 if alarm[0] = -1
 {
  alarm[0] = 2
 }
}*/

if (instance_number(obj_controller) &gt; 0) {
  if (obj_controller.lStick2 != 0 || (!global.dual_controls &amp;&amp; locked)) &amp;&amp; !dead &amp;&amp; can_move
  {
   if alarm[0] = -1
   {
    if (room != room_survival || super_raiyan_active) {
     alarm[0] = 2;
    } else {
     var sea_half_height = (room_height - 496)/4;
     bullet_timer_max = 30/global.pw_bullet_speed;
     bullet_timer = floor(max(2, min(max(0, 496+sea_half_height-y)*bullet_timer_max/sea_half_height, bullet_timer_max)));
     alarm[0] = floor(max(2, min(max(0, 496+sea_half_height-y)*bullet_timer_max/sea_half_height, bullet_timer_max)));
    }
   }
  }
}

//Set water physics
xsp = hspeed
ysp = vspeed


//Limit direction between 0 and 360
// (WTF??? I would not type this now)

if direction &gt; 360
{
 offset = direction - 360
 direction = offset
}

if direction &lt; 0
{
 offset = 0 - direction
 direction = 360 - offset
}



//Limit image_angle between 0 and 360
// (Again, I would not type this now)

if image_angle &gt; 360
{
 offset = image_angle - 360
 image_angle = offset
}

if image_angle &lt; 0
{
 offset = 0 - image_angle
 image_angle = 360 - offset
}


//Deform sprite
/*if (speed &lt; 4 || speed = 4)
{
 if abs(direction-image_angle) &lt; 90 || abs(direction-image_angle) &gt; 270
 {
  image_speed = 0
  sprite_index = spr_ship_edit     //&lt;---------------------EDIT!!!!!!!!
  image_index = floor((speed/4)*14)
 }
 else
 {
  image_speed = 0
  sprite_index = spr_ship_edit     //&lt;---------------------EDIT!!!!!!!!
  image_index = 0
 }
}
else
{
 if abs(direction-image_angle) &lt; 90  || abs(direction-image_angle) &gt; 270
 {
  if sprite_index = spr_ship_edit
  {
   sprite_index = spr_player_fast
   image_index = 0
  }
  image_speed = 0.25 * ((speed-4)/0.93)
 }
 else
 {
 // if abs(direction-image_angle) &lt; 355
 // {
   image_speed = 0
   if sprite_index = spr_player_fast
   {
    sprite_index = spr_ship_edit     //&lt;---------------------EDIT!!!!!!!!
   }
   image_index = 0
//  }
 }
}*/

if (abs(direction-image_angle) &gt; 1)
{
  image_index = 0
}



//Auto-aim

ne = 0
locked = false

if (instance_number(obj_controller) &gt; 0 &amp;&amp; instance_number(par_enemy) &gt; 0) {
  if (obj_controller.lStick2 != 0 || !global.dual_controls) &amp;&amp; !dead &amp;&amp; can_move
  {
   ne = instance_nearest(x+lengthdir_x(200,image_angle),y+lengthdir_y(200,image_angle),par_enemy)
   if abs(x-ne.x) &lt; 480 &amp;&amp; abs(y-ne.y) &lt; 270
   {
    //if point_direction(x,y,ne.x,ne.y) &lt; obj_controller.dStick2+90 &amp;&amp; point_direction(x,y,ne.x,ne.y) &gt; obj_controller.dStick2-90
    if (!global.dual_controls ||
        abs(point_direction(x,y,ne.x,ne.y) - obj_controller.dStick2) &lt; 90 || abs(point_direction(x,y,ne.x,ne.y) - obj_controller.dStick2) &gt; 270)
    {
     locked = true
     if (ne.object_index == obj_enemy_shark || ne.object_index == obj_boss_shark
          || ne.object_index == obj_large_shark) {
      if (ne.state == SHARK_DIE || ne.state == SHARK_DEAD) {
        locked = false;
      }
     }
     if (ne.object_index == obj_final_boss) {
      if (ne.state == RAY_DM_PREP || ne.state == RAY_DEAD || ne.state == RAY_DEAD_FALL) {
        locked = false;
      }
     }
     if (locked) {
      new_angle = point_direction(x,y,ne.x,ne.y)
      image_angle = (image_angle+(sin(degtorad(new_angle-image_angle))*50));
     }
    }
   }
  }
}


/* DRAFT 3
if obj_controller.lStick2 != 0
{
 ne = instance_nearest(x+lengthdir_x(200,image_angle),y+lengthdir_y(200,image_angle),par_enemy)
 if point_distance(x,y,ne.x,ne.y) &lt; 551
 {
  //if point_direction(x,y,ne.x,ne.y) &lt; obj_controller.dStick2+90 &amp;&amp; point_direction(x,y,ne.x,ne.y) &gt; obj_controller.dStick2-90
  if abs(point_direction(x,y,ne.x,ne.y) - obj_controller.dStick2) &lt; 90 || abs(point_direction(x,y,ne.x,ne.y) - obj_controller.dStick2) &gt; 270
  {
   new_angle = point_direction(x,y,ne.x,ne.y)
   image_angle = (image_angle+(sin(degtorad(new_angle-image_angle))*50));
   locked = true
  }
 }
}

*/

/* DRAFT 2
if obj_controller.lStick2 != 0
{
 ne = instance_nearest(x+lengthdir_x(250,image_angle),y+lengthdir_y(250,image_angle),par_enemy)
 if point_direction(x,y,ne.x,ne.y) &lt; obj_controller.dStick2+90 &amp;&amp; point_direction(x,y,ne.x,ne.y) &gt; obj_controller.dStick2-90 &amp;&amp; point_distance(x,y,ne.x,ne.y) &lt; 551
 {
  new_angle = point_direction(x,y,ne.x,ne.y)
  image_angle = (image_angle+(sin(degtorad(new_angle-image_angle))*50));
  locked = true
 }
}
*/


/* DRAFT 1
if obj_controller.lStick2 != 0
{
 ne = instance_nearest(x+lengthdir_x(250,image_angle),y+lengthdir_y(250,image_angle),par_enemy)
 if point_direction(x,y,ne.x,ne.y) &lt; image_angle+45 &amp;&amp; point_direction(x,y,ne.x,ne.y) &gt; image_angle-45 &amp;&amp; point_distance(x,y,ne.x,ne.y) &lt; 551
 {
  new_angle = point_direction(x,y,ne.x,ne.y)
  image_angle = (image_angle+(sin(degtorad(new_angle-image_angle))*50));
  locked = true
 }
}
*/

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create trail
/*
_partabc_dirmn=direction-180
_partabc_dirmx=direction-180
part_type_direction(_partabc,_partabc_dirmn,_partabc_dirmx,_partabc_diric,_partabc_dirwg)
if speed &gt; 4 &amp;&amp; y &gt; 496
{
part_emitter_region(_sysabc,_emiabc,x-_emiabc_radius,x+_emiabc_radius,y-_emiabc_radius,y+_emiabc_radius,_emiabc_shape,_emiabc_distr)
part_emitter_burst(_sysabc,_emiabc,_partabc,_partabc_count)
}

*/
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create y-offset for the floaty effect and wiggle-offset when moving
if speed &lt; 0.5
{
  if y_add = false
   yy -= 0.1
  if y_add = true
   yy += 0.1

  if yy &gt; 4
  {
   yy = 4
   y_add = false
  }

  if yy &lt; -4 
  {
   yy = -4
   y_add = true
  }
 
  if wiggle_offset != 0
  {
    if wiggle_offset &gt; 0
      wiggle_offset -= 0.1
    else
      wiggle_offset += 0.1
  }
}
else
{
  if yy != 0
  {
    if yy &gt; 0
      yy -= 0.1
    else
      yy += 0.1
  }
  
  if (y &gt; 496 &amp;&amp; speed &gt; 0.5)
  {
    if wiggle_add = false
      wiggle_offset -= 0.2
    if wiggle_add = true
      wiggle_offset += 0.2
  
    if wiggle_offset &gt; 2
    {
      wiggle_offset = 2
      wiggle_add = false
    }
  
    if wiggle_offset &lt; -2
    {
      wiggle_offset = -2
      wiggle_add = true
    }
  }
  /*else
  {
    if wiggle_offset != 0
    {
      if wiggle_offset &gt; 0
        wiggle_offset -= 0.2
      else
        wiggle_offset += 0.2
    }
  }*/

}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Animate eyes

eye_image += eye_inc

if eye_image &gt; 16
{
 eye_image = 0
}

if round(eye_image) &lt; 16
{
 eye_inc = random(0.1)
}
else
{
 eye_inc = 0.2
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Clamp oxygen value
oxygen = clamp(oxygen, 0, max_oxygen)
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update physics
update_physics();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check oxygen
if (oxygen &lt;= 0 &amp;&amp; can_move) {
  dead = true;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check combo count
if (combo_count &gt; 2) {
  if (can_get_no_hit_3) {
    add_message("No hit 3x: +50pts");
    score += 50;
    can_get_no_hit_3 = false;
  }
  if (combo_count &gt; 4) {
    add_message("No hit 5x: +300pts");
    score += 300;
    if ((global.pw_super_raiyan &gt; 0)) {
      if (!super_raiyan_active) {
        if (!super_raiyan_available) {
          super_raiyan_available = true;
          add_message("Super Raiyan form available");
        }
      } else {
        add_message("Super Raiyan form: +"+string(2*global.pw_super_raiyan)+"s");
        alarm[5] += room_speed*(2*global.pw_super_raiyan);
      }
    }
    combo_count = 0;
    can_get_no_hit_3 = true;
  }
} else {
  can_get_no_hit_3 = true;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Check super raiyan availability
if (super_raiyan_available &amp;&amp; (!super_raiyan_active) &amp;&amp; instance_number(obj_controller) &gt; 0) {
  for (i=0; i&lt;5; i+=1)
  {
    if (device_mouse_check_button_pressed(i, mb_left))
    {
      /*if ((device_mouse_x(i) &gt; view_xview + view_wview-96)
          &amp;&amp; (device_mouse_x(i) &lt; view_xview +view_wview-32)
          &amp;&amp; (device_mouse_y(i) &gt; view_yview + (view_hview/2)-42)
          &amp;&amp; (device_mouse_y(i) &lt; view_yview + (view_hview/2)+22)
          )
      {
        super_raiyan_available = false;
        super_raiyan_active = true;
        event_user(1);

        alarm[5] = room_speed*10+(2*global.pw_super_raiyan);
      }*/
      if (device_mouse_on_button(view_xview[0]+480, view_yview[0]+508+obj_controller.raiyan_y, i))
      {
        super_raiyan_available = false;
        super_raiyan_active = true;
        event_user(1);

        alarm[5] = room_speed*15+(2*global.pw_super_raiyan);
      }
    }
  }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Super raiyan perks
if (super_raiyan_active) {
  oxygen = max_oxygen;
  part_emitter_region(_systemabc,_emitterabc,x-20,x+20,y-20,y+20,ps_shape_ellipse,ps_distr_linear)
  part_emitter_burst(_systemabc,_emitterabc,_particleabc,3);
  if (global.play_music) {
    if (!audio_is_playing(mus_super)) {
      audio_play_sound(mus_super, 10, true);
    }
    if (audio_is_playing(mus_story)) {
      audio_pause_sound(mus_story);
    }
    if (audio_is_playing(mus_boss)) {
      audio_pause_sound(mus_boss);
    }
    if (audio_is_playing(mus_kidnapped)) {
      audio_pause_sound(mus_kidnapped);
    }
  }
} else {
  if (global.play_music) {
    if (audio_is_playing(mus_super) &amp;&amp; room != room_level_15) {
      audio_stop_sound(mus_super);
    }
    if (audio_is_paused(mus_story)) {
      audio_resume_sound(mus_story);
    }
    if (audio_is_paused(mus_boss)) {
      audio_resume_sound(mus_boss);
    }
    if (audio_is_paused(mus_kidnapped) &amp;&amp; room != room_level_15) {
      audio_resume_sound(mus_kidnapped);
    }
  }
}

//Reset perks in alarm[5]
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Change colour when getting power up
if (getting_pw &amp;&amp; pw_out_of_water) {
  player_white_grad = min(player_white_grad+0.03, 1);
} else {
  player_white_grad = max(player_white_grad-0.03, 0);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_boss_anchor">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; !super_raiyan_active) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_boss_eel">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; !super_raiyan_active) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_boss_shark">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; (other.state == SHARK_ATTACK || (other.state == SHARK_IDLE &amp;&amp; other.bite)) &amp;&amp; !super_raiyan_active
  &amp;&amp; y &gt; 496) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_boss_worm_body">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_boss_worm_head">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string></string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_star">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_play_sound(snd_collect_star, 0, false);
with (other) {
  instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_explode">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit_explode) {
  alarm[2] = other.alarm[1] + 1;
  oxygen += 80;
  hit_explode = true;
}
oxygen = clamp(oxygen, 0, max_oxygen);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_enemy_knife">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; other.dash &amp;&amp; !super_raiyan_active) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_large_shark">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; (other.state == SHARK_ATTACK || (other.state == SHARK_IDLE &amp;&amp; other.bite)) &amp;&amp; !super_raiyan_active) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_enemy_shark">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; (other.state == SHARK_ATTACK || (other.state == SHARK_IDLE &amp;&amp; other.bite)) &amp;&amp; !super_raiyan_active) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_enemy_fork">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit &amp;&amp; other.dash &amp;&amp; !super_raiyan_active) {
  instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
  oxygen -= other.oxygen_decrease;
  alarm[3] = room_speed/5;
  
  hit = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet_enemy">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!hit) {
  if  (!super_raiyan_active) {
    instance_create(x+lengthdir_x(10,image_angle), y+lengthdir_y(10,image_angle), obj_hit_bubbles);
    oxygen -= other.oxygen_decrease;
    alarm[3] = room_speed/5;
    hit = true;
  }
  
  with(other) {
    instance_destroy();
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create invincible shield
// setting up the particle system      
_systemabc = part_system_create()
part_system_depth(_systemabc,-1)
_particleabc = part_type_create()
part_type_shape(_particleabc,pt_shape_star)
part_type_size(_particleabc,0.10,0.10,0,0)
part_type_scale(_particleabc,1,1)
part_type_orientation(_particleabc,0,0,0,0,0)
part_type_color3(_particleabc,16777215,12632256,65535)
part_type_alpha3(_particleabc,1,1,1)
part_type_blend(_particleabc,0)
part_type_life(_particleabc,5,2)
part_type_speed(_particleabc,2,5,0,0)
part_type_direction(_particleabc,0,359,0,0)
part_type_gravity(_particleabc,0,0)
_emitterabc = part_emitter_create(_systemabc)
part_emitter_region(_systemabc,_emitterabc,x-20,x+20,y-20,y+20,ps_shape_ellipse,ps_distr_linear)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Get power up
if (room == room_level_3 &amp;&amp; !global.pw_bullet3) {
  global.pw_bullet3 = true;
  instance_create(x, y, obj_powerup_box);
} else if (room == room_level_6 &amp;&amp; !global.pw_oxygeninst) {
  global.pw_oxygeninst = true;
  instance_create(x, y, obj_powerup_box);
} else if (room == room_level_9 &amp;&amp; global.pw_bulletdmg &lt;= 1) {
  global.pw_bulletdmg = 2;
  instance_create(x, y, obj_powerup_box);
} else if (room == room_level_12 &amp;&amp; global.pw_super_raiyan == 0) {
  global.pw_super_raiyan = 1;
  instance_create(x, y, obj_powerup_box);
}

save_data("Powers", "BulletDmg", global.pw_bulletdmg);
save_data("Powers", "Bullet3", global.pw_bullet3);
save_data("Powers", "OxygenInst", global.pw_oxygeninst);
save_data("Powers", "SuperRaiyan", global.pw_super_raiyan);

alarm[8] = room_speed/2;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy Particle System
part_system_clear(_sysabc)
part_system_destroy(_sysabc)

if (super_raiyan_active) {
  part_system_clear(_systemabc)
  part_system_destroy(_systemabc)
  super_raiyan_active = false;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stop super music
if (audio_is_playing(mus_super)) {
  audio_stop_sound(mus_super);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Reload powers
if (room == room_coop_test) {
  global.dual_controls = load_data("Options", "Controls", global.dual_controls);
  global.pw_bulletdmg = load_data("Powers", "BulletDmg", global.pw_bulletdmg);
  global.pw_bullet3 = load_data("Powers", "Bullet3", global.pw_bullet3);
  global.pw_oxygeninst = load_data("Powers", "OxygenInst", global.pw_oxygeninst);
  global.pw_super_raiyan = load_data("Powers", "SuperRaiyan", global.pw_super_raiyan);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw player, trail and eyes
x_wiggle_offset = lengthdir_x(wiggle_offset, image_angle+90)
y_wiggle_offset = lengthdir_y(wiggle_offset, image_angle+90)

player_colour = merge_colour(c_black, c_white, player_white_grad);

if (super_raiyan_active) {
  draw_trail(16,22,c_yellow,-1,1,1, x_wiggle_offset, y_wiggle_offset+yy);
}
else {
  draw_trail(16,22,player_colour,-1,1,1, x_wiggle_offset, y_wiggle_offset+yy);
}

if (!(alarm[3] &gt; room_speed/10)) {
  if (super_raiyan_active) {
    draw_sprite_ext(spr_ship_super, image_index, x+x_wiggle_offset, y+y_wiggle_offset+yy, image_xscale, image_yscale, image_angle, image_blend, image_alpha);
  }
  else {
    if (player_white_grad &lt;= 0.0) {
      draw_sprite_ext(sprite_index, image_index, x+x_wiggle_offset, y+y_wiggle_offset+yy, image_xscale, image_yscale, image_angle,player_colour, image_alpha);
    } else {
      draw_circle_colour(x+x_wiggle_offset, y+y_wiggle_offset+yy,10, player_colour, player_colour, false);
    }
  }
  
  draw_set_blend_mode(bm_normal)
  if (global.draw_eyes) {
    draw_sprite_ext(spr_player_eyes, floor(eye_image), x+x_wiggle_offset, y+y_wiggle_offset+yy, image_xscale, image_yscale, image_angle, c_white, image_alpha)
  }

}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Cursor
if (can_move) {
  if locked == false
  {
   x_cursor = x+lengthdir_x(200,image_angle)
   y_cursor = y+lengthdir_y(200,image_angle)
   //draw_sprite(spr_cursor,0,x+lengthdir_x(250,image_angle),y+lengthdir_y(250,image_angle))
  }
  else
  {
  if (instance_number(par_enemy) &gt; 0) {
     ne = instance_nearest(x+lengthdir_x(200,image_angle),y+lengthdir_y(200,image_angle),par_enemy)
     x_cursor = ne.x
     y_cursor = ne.y
     if (ne.object_index == obj_enemy_shark) {
        if (ne.state == SHARK_DIE || ne.state == SHARK_DEAD) {
          ne = 0
          x_cursor = x+lengthdir_x(200,image_angle)
          y_cursor = y+lengthdir_y(200,image_angle)
        }  
     }
   }
   //draw_sprite(spr_cursor,0,ne.x,ne.y)
  }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw exclamation mark when kidnapped
if (instance_number(obj_lover) &gt; 0 &amp;&amp; instance_number(obj_bad) &gt; 0) {
  if (obj_lover.state == LOVER_KIDNAPPED &amp;&amp; obj_bad.x &lt; room_width) {
    draw_set_colour(c_white);
    draw_set_font(font_consolas_48);
    draw_set_halign(fa_center);
    draw_text(x, y-64,"!");
    draw_set_halign(fa_left);
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_number(obj_fade_in) + instance_number(obj_message_box) +
    instance_number(obj_fade_out) &lt;= 0) {
  if (!dead &amp;&amp; can_move &amp;&amp; !getting_pw &amp;&amp; !got_pw &amp;&amp; !pw_out_of_water) {
    instance_create(x,y, obj_pause_menu);
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>-1</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0</PhysicsObjectFriction>
  <PhysicsObjectAwake>0</PhysicsObjectAwake>
  <PhysicsObjectKinematic>-1</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>35,35</point>
    <point>13,35</point>
  </PhysicsShapePoints>
</object>
