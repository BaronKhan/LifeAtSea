<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_message_box</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-999999</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Take screenshot and deactivate everything
screenshot = surface_create(view_wview[0],view_hview[0]);
surface_copy(screenshot, 0,0, application_surface)
instance_deactivate_all(true);
physics_pause_enable(true);
yy = view_yview[0]+(view_hview[0]);

target_y = 0;
sliding_out = false;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create placeholders
title = "";
text = "";
image1 = -1;

buttons = array_create(10);
button_count = 0;

title_x_offset = 0;
title_y_offset = 0;

text_x_offset = 0;
text_y_offset = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_activate_all();
physics_pause_enable(false);
if (surface_exists(screenshot)) {
  surface_free(screenshot);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (sliding_out) {
  yy = tune_value(yy, target_y, max(10, min(20, abs(yy)/8)));
} else {
  yy = tune_value(yy, target_y, max(.25, min(20, abs(yy)/25)));
}

if (yy &lt; -view_hview[0]+16 &amp;&amp; sliding_out) {
  instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///If touched button
if (!sliding_out) {
  var view_centre_x = view_xview[0]+(view_wview[0]/2);
  var view_centre_y = view_yview[0]+(view_hview[0]/2);
  
  for (var i=0; i &lt; button_count; i++) {
    var button = ds_map_create();
    ds_map_copy(button, buttons[i]);
    var x_offset = ds_map_find_value(button, "x_offset");
    var y_offset = ds_map_find_value(button, "y_offset");
    if (mouse_on_button(view_centre_x+x_offset, view_centre_y+y_offset+yy)) {
      var user_def_num = ds_map_find_value(button, "user_def_num");
      event_user(user_def_num);
    }
  }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Remove box - TODO: replace with slide out
if (!sliding_out) {
  sliding_out = true;
  target_y = -view_hview[0];
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_activate_all();
physics_pause_enable(false);
if (surface_exists(screenshot)) {
  surface_free(screenshot);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw box
//Draw box
var view_centre_x = view_xview[0]+(view_wview[0]/2);
var view_centre_y = view_yview[0]+(view_hview[0]/2);

if (surface_exists(screenshot)) {
  draw_surface(screenshot, view_xview[0], view_yview[0]);
  surface_copy(screenshot, 0,0, screenshot);
}
draw_sprite(sprite_index, -1, view_centre_x, view_centre_y+yy);

//Draw title
draw_set_color(c_black);
draw_set_font(font_kristen_48);
draw_set_halign(fa_center);
draw_set_valign(fa_middle);
draw_text_ext(view_centre_x+title_x_offset, view_yview[0]+(view_hview[0]*.3)+yy+title_y_offset, title, 50, 600);

//Draw buttons
draw_set_font(font_consolas_14);
for (var i=0; i &lt; button_count; i++) {
  var button = ds_map_create();
  ds_map_copy(button, buttons[i]);
  var x_offset = ds_map_find_value(button, "x_offset");
  var y_offset = ds_map_find_value(button, "y_offset");
  var text_ = ds_map_find_value(button, "text");
  draw_sprite(spr_message_button, -1, view_centre_x+x_offset, view_centre_y+y_offset+yy);
  draw_text(view_centre_x+x_offset, view_centre_y+y_offset+yy, text_);
}

//Draw image and text
if (image1 != -1) {
  draw_sprite(image1, -1, view_centre_x+128, view_centre_y+yy);
  draw_set_halign(fa_left);
  draw_text_ext(view_centre_x-220+text_x_offset, view_centre_y+yy+text_y_offset, text, 16, 220);
} else {
  draw_set_halign(fa_center);
  draw_text_ext(view_centre_x+text_x_offset, view_centre_y+yy+text_y_offset, text, 16, 440);
}

draw_set_halign(fa_left);
draw_set_valign(fa_top);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
